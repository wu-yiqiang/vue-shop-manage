{"remainingRequest":"C:\\Users\\windows\\Project\\vue-shop-manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\vue-shop-manage\\src\\components\\user\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\vue-shop-manage\\src\\components\\user\\Users.vue","mtime":1612012802914},{"path":"C:\\Users\\windows\\Project\\vue-shop-manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\vue-shop-manage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\vue-shop-manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\vue-shop-manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCAgZGVmYXVsdCB7CiAgLy/mlbDmja4KICBkYXRhKCl7CiAgICAvKuiHquWumuS5ieagoemqjOinhOWImSovCiAgICBjb25zdCBjaGVja19lbWFpbCA9ICAoIHJ1bGUsdmFsdWUsY2FsbGJhY2spID0+IHsKICAgICAgICAvL+agoemqjOmCrueuseeahOWQiOazleaApwogICAgICAgIGNvbnN0IHJlZ19lbWFpbD0vXlthLXpBLVowLTlfLV0rQFthLXpBLVowLTlfLV0rKFwuW2EtekEtWjAtOV8tXSspKyQvCiAgICAgICAgY29uc3QgZmxhZz1yZWdfZW1haWwudGVzdCh2YWx1ZSkKICAgICAgICBpZighZmxhZykgcmV0dXJuICBjYWxsYmFjayhuZXcgRXJyb3IoJ+i+k+WFpeeahOmCrueuseS4jeespuWQiOinhOiMg++8gScpKQoKICAgICAgIHJldHVybiAgY2FsbGJhY2soKQoKICAgIH07CiAgICBjb25zdCBjaGVja19wYXNzd29yZCA9ICAocnVsZSx2YWx1ZSxjYWxsYmFjaykgPT4gewogICAgICAgIC8v5qCh6aqM5a+G56CB55qE5ZCI5rOV5oCnCiAgICAgIGNvbnN0IHJlZ19wYXNzd29yZD0JL15bYS16MC05JiolJCNAIV5fLV17NiwxOH0kLwogICAgICBjb25zdCBmbGFnPXJlZ19wYXNzd29yZC50ZXN0KHZhbHVlKQogICAgICBpZighZmxhZykgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6L6T5YWl55qE5a+G56CB5by65bqm5LiN56ym5ZCI6KeE6IyD77yBJykpCiAgICAgIHJldHVybiAgY2FsbGJhY2soKQogICAgfTsKICAgIGNvbnN0IGNoZWNrX3Bob25lPSAocnVsZSx2YWx1ZSxjYWxsYmFjaykgPT4gewogICAgICAvL+eUteivneWPt+eggemqjOivgQoKICAgICAgY29uc3QgcmVnX3Bob25lPS9eMSg/OjNcZHw0WzQtOV18NVswLTM1LTldfDZbNjddfDdbMDEzLThdfDhcZHw5XGQpXGR7OH0kLwogICAgICBsZXQgZmxhZ3M9cmVnX3Bob25lLnRlc3QodmFsdWUpCiAgICAgIGlmKCFmbGFncykgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6L6T5YWl55qE55S16K+d5Y+356CB5LiN56ym5ZCI6KeE6IyD77yBJykpCiAgICAgIHJldHVybiAgY2FsbGJhY2soKQogICAgfTsKICAgIGNvbnN0ICBjaGVja19yZXBhc3N3b3JkID0gKHJ1bGUsdmFsdWUsY2FsbGJhY2spID0+IHsKICAgICAgLy/moKHpqozkuKTmrKHovpPlhaXnmoTlr4bnoIHmraPnoa7mgKcKICAgICAgY29uc29sZS5sb2codmFsdWUpCiAgICAgIGlmKHRoaXMuaW5wdXRJbmZvUmVmLnBhc3N3b3JkIT09dmFsdWUpIHJldHVybiAgY2FsbGJhY2sobmV3IEVycm9yKCLkuKTmrKHovpPlhaXnmoTlr4bnoIHkuI3kuIDoh7TvvIEiKSkKCiAgICAgIHJldHVybiBjYWxsYmFjaygpCgogICAgfQogICAgcmV0dXJuIHsKICAgICBxdWVyeURhdGE6ewogICAgICAgcXVlcnk6IiIsCiAgICAgICBwYWdlbnVtOjEsCiAgICAgICBwYWdlc2l6ZToxLAogICAgIH0sCiAgICAgIHRvdGFsOjAsCiAgICAgIHVzZXJsaXN0OltdLAogICAgICBmaW5kRGF0ZToiIiwKICAgICAgLy/mj5DnpLrmoYbmmL7njrAKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8q5paw5aKe55So5oi35L+h5oGv55qE5qCh6aqM6KeE5YiZKi8KICAgICBpbnB1dEluZm9SZWY6ewogICAgICAgdXNlcm5hbWU6IiIsCiAgICAgICBlbWFpbDoiIiwKICAgICAgIHBob25lbnVtOiAiIiwKICAgICAgIHBhc3N3b3JkOiIiLAogICAgICAgcmVwYXNzd29yZDoiIiwKICAgICB9LAogICAgICBydWxlczp7CiAgICAgICAgdXNlcm5hbWU6WwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDMsIG1heDogMTAsIG1lc3NhZ2U6ICfplb/luqblnKggMyDliLAgMTAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGVtYWlsOlsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpgq7nrrEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja19lbWFpbCwgdHJpZ2dlcjonYmx1cicgfSwKICAgICAgICBdLAogICAgICAgIHBob25lbnVtOlsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlLXor53lj7fnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja19waG9uZSwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOlsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja19wYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGNvbmZpcm1wYXNzd29yZDpbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35YaN5qyh6L6T5YWl5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tfcmVwYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICB9LAoKICAgIH0KICB9LAogIGNyZWF0ZWQoKXsKICAgIC8v5Y+R6YCB6K+35rGCCiAgICB0aGlzLmdldFVzZXJzRGF0YSgpCiAgfSwKICBtZXRob2RzOnsKICAgIC8v5Y+R6YCB6K+35rGC5pa55rOVCiAgICBnZXRVc2Vyc0RhdGE6YXN5bmMgIGZ1bmN0aW9uICgpIHsKICAgICAgY29uc3Qge2RhdGE6cmVzfT1hd2FpdCB0aGlzLiRodHRwLmdldCgidXNlcnMiLHtwYXJhbXM6dGhpcy5xdWVyeURhdGF9KQogICAgICB0aGlzLnVzZXJsaXN0PXJlcy5kYXRhLnVzZXJzCiAgICAgIHRoaXMudG90YWw9cmVzLmRhdGEudG90YWwKICAgICAgdGhpcy5jdXJyZW50cGFnZT1yZXMuZGF0YS5wYWdlbnVtCiAgICAgIC8vY29uc29sZS5sb2codGhpcy51c2VybGlzdCkKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKCl7CgogICAgfSwKICAgIC8q6I635Y+W5b2T5YmN6aG15pWwKi8KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoKXsKCiAgICB9LAogICAgLyrliIfmjaLnlKjmiLfnirbmgIEqLwogICAgYXN5bmMgY2hhbmdlVXNlclN0YXR1cyh1c2VyaW5mbyl7CiAgICAgIC8v5Y+R6YCBcHV06K+35rGC5pS55Y+Y6K+l55So5oi355qE54q25oCBCiAgICAgIGNvbnN0IHtkYXRhOnJlc309YXdhaXQgdGhpcy4kaHR0cC5wdXQoInVzZXJzLzp1SWQvc3RhdGUvOnR5cGUiLHt1SUQ6dXNlcmluZm8uaWQsIHR5cGU6dXNlcmluZm8ubWdfc3RhdGV9KQogICAgICAvL2NvbnNvbGUubG9nKHJlcykKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyE9MjAwKSB7CiAgICAgICAgLy/mm7TmlrDnirbmgIHkv6Hmga/lpLHotKUKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWV0YS5tc2cpCiAgICAgIH0KICAgICAgLy/lkI7lj7DkuIrkvKDnlKjmiLfnirbmgIHmiJDlip8KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmm7TmlrAiK3VzZXJpbmZvLnVzZXJuYW1lKyLnirbmgIHkv6Hmga/miJDlip8iKQogICAgICB9LAogICAgLy/lvLnlh7rlr7nor53mj5DnpLrmoYYKICAgIGFkZFVzZXJJbmZvKCl7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZT10cnVlCiAgICB9LAogIH0KfQoK"},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!--卡片-->\r\n    <el-card >\r\n      <!--搜索框-->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <div >\r\n            <el-input placeholder=\"请输入内容\" type=\"text\" clearable v-model=\"findDate\">\r\n              <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n            </el-input>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addUserInfo()\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n\r\n      <!--表格-->\r\n      <el-table  stripe border style=\"width: 100%\" :data=\"userlist\" >\r\n        <el-table-column type=\"index\" label=\"序号\" width=\"180\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"username\"\r\n            label=\"姓名\"\r\n            width=\"180\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"email\"\r\n            label=\"邮箱\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"mobile\"\r\n            label=\"电话\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"role_name\"\r\n            label=\"角色\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"状态\" align=\"center\">\r\n          <template slot-scope=\"scop\" >\r\n            <el-switch v-model=\"scop.row.mg_state\"  @change=\"changeUserStatus(scop.row)\">\r\n\r\n            </el-switch>\r\n\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"Operation\"\r\n            label=\"操作\" align=\"center\">\r\n          <template >\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"handleEdit(scope.$index, scope.row)\" class=\"el-icon-edit\">\r\n\r\n            </el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\" class=\"el-icon-delete\">\r\n            </el-button>\r\n            <el-tooltip content=\"角色权限\" placement=\"top\" :enterable=\"false\">\r\n              <el-button size=\"mini\" type=\"primary\" @click=\"handleDelete(scope.$index, scope.row)\" class=\"el-icon-setting\">\r\n              </el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!--分页-->\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"queryData.pagenum\" :page-sizes=\"[1, 2, 3, 5]\"\r\n          :page-size=\"queryData.pagesize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n\r\n      <!--弹出框-->\r\n      <el-dialog title=\"添加用户\" :visible.sync=\"dialogVisible\" width=\"30%\" >\r\n        <el-form  label-width=\"20%\" :rules=\"rules\" ref=\"inputInfoRef\" :model=\"inputInfoRef\">\r\n          <!-- 用户名 -->\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n           <el-input type=\"text\" v-model=\"inputInfoRef.username\" ></el-input>\r\n          </el-form-item>\r\n          <!--邮箱-->\r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input  type=\"text\" v-model=\"inputInfoRef.email\" ></el-input>\r\n          </el-form-item>\r\n          <!--电话-->\r\n          <el-form-item label=\"电话\" prop=\"phonenum\">\r\n            <el-input  type=\"text\" v-model=\"inputInfoRef.phonenum\" ></el-input>\r\n          </el-form-item>\r\n          <!--密码-->\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input  type=\"password\" v-model=\"inputInfoRef.password\" ></el-input>\r\n          </el-form-item>\r\n\r\n          <!--确认密码-->\r\n          <el-form-item label=\"确认密码\" prop=\"confirmpassword\">\r\n            <el-input  type=\"password\" v-model=\"inputInfoRef.repassword\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <!--确认框-->\r\n        <!--重置表单-->\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export  default {\r\n    //数据\r\n    data(){\r\n      /*自定义校验规则*/\r\n      const check_email =  ( rule,value,callback) => {\r\n          //校验邮箱的合法性\r\n          const reg_email=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n          const flag=reg_email.test(value)\r\n          if(!flag) return  callback(new Error('输入的邮箱不符合规范！'))\r\n\r\n         return  callback()\r\n\r\n      };\r\n      const check_password =  (rule,value,callback) => {\r\n          //校验密码的合法性\r\n        const reg_password=\t/^[a-z0-9&*%$#@!^_-]{6,18}$/\r\n        const flag=reg_password.test(value)\r\n        if(!flag) return callback(new Error('输入的密码强度不符合规范！'))\r\n        return  callback()\r\n      };\r\n      const check_phone= (rule,value,callback) => {\r\n        //电话号码验证\r\n\r\n        const reg_phone=/^1(?:3\\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\\d|9\\d)\\d{8}$/\r\n        let flags=reg_phone.test(value)\r\n        if(!flags) return callback(new Error('输入的电话号码不符合规范！'))\r\n        return  callback()\r\n      };\r\n      const  check_repassword = (rule,value,callback) => {\r\n        //校验两次输入的密码正确性\r\n        console.log(value)\r\n        if(this.inputInfoRef.password!==value) return  callback(new Error(\"两次输入的密码不一致！\"))\r\n\r\n        return callback()\r\n\r\n      }\r\n      return {\r\n       queryData:{\r\n         query:\"\",\r\n         pagenum:1,\r\n         pagesize:1,\r\n       },\r\n        total:0,\r\n        userlist:[],\r\n        findDate:\"\",\r\n        //提示框显现\r\n        dialogVisible: false,\r\n        /*新增用户信息的校验规则*/\r\n       inputInfoRef:{\r\n         username:\"\",\r\n         email:\"\",\r\n         phonenum: \"\",\r\n         password:\"\",\r\n         repassword:\"\",\r\n       },\r\n        rules:{\r\n          username:[\r\n            { required: true, message: '请输入用户名', trigger: 'blur' },\r\n            { min: 3, max: 10, message: '长度在 3 到 10 个字符', trigger: 'blur' }\r\n          ],\r\n          email:[\r\n            { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n            { validator: check_email, trigger:'blur' },\r\n          ],\r\n          phonenum:[\r\n            { required: true, message: '请输入电话号码', trigger: 'blur' },\r\n            { validator: check_phone, trigger: 'blur' }\r\n          ],\r\n          password:[\r\n            { required: true, message: '请输入密码', trigger: 'blur' },\r\n            { validator: check_password, trigger: 'blur' }\r\n          ],\r\n          confirmpassword:[\r\n            { required: true, message: '请再次输入密码', trigger: 'blur' },\r\n            { validator: check_repassword, trigger: 'blur' }\r\n          ],\r\n        },\r\n\r\n      }\r\n    },\r\n    created(){\r\n      //发送请求\r\n      this.getUsersData()\r\n    },\r\n    methods:{\r\n      //发送请求方法\r\n      getUsersData:async  function () {\r\n        const {data:res}=await this.$http.get(\"users\",{params:this.queryData})\r\n        this.userlist=res.data.users\r\n        this.total=res.data.total\r\n        this.currentpage=res.data.pagenum\r\n        //console.log(this.userlist)\r\n      },\r\n      handleSizeChange(){\r\n\r\n      },\r\n      /*获取当前页数*/\r\n      handleCurrentChange(){\r\n\r\n      },\r\n      /*切换用户状态*/\r\n      async changeUserStatus(userinfo){\r\n        //发送put请求改变该用户的状态\r\n        const {data:res}=await this.$http.put(\"users/:uId/state/:type\",{uID:userinfo.id, type:userinfo.mg_state})\r\n        //console.log(res)\r\n        if (res.meta.status!=200) {\r\n          //更新状态信息失败\r\n          return this.$message.error(res.meta.msg)\r\n        }\r\n        //后台上传用户状态成功\r\n        this.$message.success(\"更新\"+userinfo.username+\"状态信息成功\")\r\n        },\r\n      //弹出对话提示框\r\n      addUserInfo(){\r\n        this.dialogVisible=true\r\n      },\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]}]}